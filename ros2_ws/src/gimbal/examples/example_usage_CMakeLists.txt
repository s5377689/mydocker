# Example CMakeLists.txt for a package that uses the gimbal package

cmake_minimum_required(VERSION 3.15)
project(my_gimbal_app)

# Find dependencies
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(gimbal REQUIRED)  # This finds your gimbal package

# Create an executable that uses gimbal components
add_executable(my_app
    src/main.cpp
)

# Link against gimbal libraries using the correct target names
target_link_libraries(my_app
    gimbal::gimbal_helpers              # Helper functions
    gimbal::usv_gimbal_controller       # USV gimbal controller
    gimbal::gimbal_action               # Gimbal actions
    # gimbal::gcs_gimbal_controller     # GCS gimbal controller (needs Qt6)
    # gimbal::gcs_gimbal_streamer       # GCS gimbal streamer (needs Qt6 + FFmpeg)
    # gimbal::gimbal_image_provider     # Image provider (needs Qt6)
)

# No need to add ament_target_dependencies for transitive deps
# They are automatically provided by the gimbal targets

install(TARGETS my_app
    DESTINATION lib/${PROJECT_NAME}
)

ament_package()
